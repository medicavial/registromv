<div class="container" ng-init="inicio()" style="width: 100%">
      <div class="panel panel-primary">
                <div class="panel-heading">
                         <h3 class="panel-title" >Apertura de Expediente</h3>
                </div>   

         <div class="panel-body">
            <fieldset ng-disabled="primeraEtapa">
            <form name="etapa1" ng-submit="guardaEtapa1()" novalidate>
            <div class="row">
               
                <div class="col-md-4">
                    <div class="form-group">
                        <img ng-src="imgs/logosregmv/{{rutaImgCom}}"  title="ASEGURADORA">                       
                        <input type="hidden" name="ase" id="ase" value="" >
                        <input type="hidden" name="pro" id="pro" value="" >
                    </div>
                </div>
                <div class="col-md-4" align="center">
                    <div class="form-group">
                        <div ng-show="veCDB"  style="padding-top:1.5em;">
                            <img ng-src="api/codigos/{{folio}}.png"  title="folio">
                        </div>                                           
                    </div>
                </div>
                <div class="col-md-4" align="right">
                    <div class="form-group">
                    <img ng-src="imgs/producto/{{rutaImgPro}}"  title="producto">                                                            
                    </div>
                </div>
            </div><br>

            <div class="row">
                <div class="form-group">
                  
                    <div class="col-md-12">
                       <h3> <label>Datos del Paciente</label></h3><br>                                               
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Nombre(s): </label>
                        <input type="text" class="form-control" id="nom" name="nombre" ng-model="datos.nombre" required mayusculas>
                        <div class="alert alert-danger" role="alert" ng-if="interacted(etapa1.nombre)" ng-messages="etapa1.nombre.$error">
                          <div ng-message="required">Se requiere el valor del nombre</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>A.Paterno:</label>
                        <input type="text" ng-model="datos.pat" class="form-control" id="pat" name="pat" required  mayusculas>
                        <div class="alert alert-danger" role="alert" ng-if="interacted(etapa1.pat)" ng-messages="etapa1.pat.$error">
                          <div ng-message="required">Se requiere el valor del apellido paterno</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label>A. Materno:</label>
                        <input type="text" ng-model="datos.mat" class="form-control" id="mat" name="mat" required mayusculas>
                        <div class="alert alert-danger" role="alert" ng-if="interacted(etapa1.mat)" ng-messages="etapa1.mat.$error">
                          <div ng-message="required">Se requiere el valor del apellido materno</div>
                        </div>
                    </div>
                </div>  
            </div><br> 

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Fecha de nacimiento:</label>                        
                        <input type="text" ng-disabled="edicion"  data-date-viewmode="years" data-date-format="DD-MM-YYYY"  class= "form-control" name="fecnac" id="fecnac" ng-model="datos.fecnac" data-datetimepicker-confg="{ dropdownSelector: '.dropdown-toggle' }" required mayusculas>
                        <div class="alert alert-danger" role="alert" ng-if="interacted(etapa1.fecnac)" ng-messages="etapa1.fecnac.$error">
                          <div ng-message="required">Se requiere el valor de la fecha de nacimiento</div>
                        </div>
                    </div>                    
                </div>
                <div class="col-md-4">                
                        <label>Tipo Teléfono:</label>
                        <select name="tel" id="tel" ng-model="datos.tel" style="width:100%" required="" class="form-control" >
                            <option value=""> * Seleccione tipo </option>
                            <option value="1">Particular</option>
                            <option value="2">Oficina</option>
                            <option value="3">M&oacute;vil</option>
                            <option value="4">Otro</option>                            
                        </select> 
                        <div class="alert alert-danger" role="alert" ng-if="interacted(etapa1.tel)" ng-messages="etapa1.tel.$error">
                          <div ng-message="required">Se requiere el valor del tipo de teléfono</div>
                        </div>

                </div> 
                <div class="col-md-4">  
                    <label>No. Teléfono:</label>                    
                        <input  type="text" style="width:100%" ng-model="datos.numeroTel"  class="form-control" id="numeroTel" name="numeroTel" required="" > 
                        <div class="alert alert-danger" role="alert" ng-if="interacted(etapa1.numeroTel)" ng-messages="etapa1.numeroTel.$error">
                          <div ng-message="required">Se requiere el valor del número de teléfono</div>
                        </div> 
                    </div> 
            </div>
            <br>
            <div class="row" id="renglonEmail">
                <div class="col-md-4">
                    <div class="form-group">
                                               
                         <label>E-Mail: </label>                        
                            <input type="email"  name="correo" ng-model="datos.correo" class="form-control" ng-required="!checked">  
                            <div class="alert alert-danger" role="alert" ng-if="interacted(etapa1.correo)" ng-messages="etapa1.correo.$error">
                          <div ng-message="required">Se requiere el valor del correo</div>
                          <div ng-message="email">el formato no es el indicado</div>
                        </div>                             
                        <label>                           
                                <input class="checkbox-inline" id="checkSinCorreo" ng-model="checked" type="checkbox" data-toggle="confirmation" data-placement="right" data-btn-ok-label="Si"  title="Si el usuario no proporciona el correo perderá los cupones de descuento, ¿Desea continuar?" data-popout="true"> Sin correo                        
                        </label>
                        
                    </div>
                </div>
                <div class="col-md-4">
                    <div ng-show="veCupon" class="mianimacion" style="padding-top:2em">
                        <a href="imgs/cupon.jpg" target="_blank"> Ver cupón de descuento </a> 
                    </div>
                </div>
            </div>        
            <div class="row">
                <div class="col-md-4">
                <div class="form-group">
                    <input type="submit" ng-hide="btnGuardar" id="btnenvioprimero" class="btn btn-primary">
                </div>
            </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div ng-show="cargador" align="center">
                            <img ng-src="imgs/cargador.gif">
                    </div>
                </div>
                <div class="col-md-12">
                <div ng-show="mensaje">
                        {{mensaje}}
                </div>
            </div>
            </div>
            </form> 
            </fieldset>     
            <div id="validacionCortesia" ng-show="autoriza" class="mianimacion">
                <form id="registraCortesia">
                    <div class="row">                    
                        <div class="col-md-12">
                            <label><h3>Quien Autoriza</h3></label>
                            <div class="radio">
                              <label>
                                <input type="radio" name="optionsRadios" id="optionsRadios1" value="1" checked>
                                Jos&eacute; S&aacute;nchez
                              </label>
                            </div>
                            <div class="radio">
                              <label>
                                <input type="radio" name="optionsRadios" id="optionsRadios2" value="2">
                                Xavier S&aacute;nchez
                              </label>
                            </div>
                            <div class="radio">
                              <label>
                                <input type="radio" name="optionsRadios" id="optionsRadios3" value="3">
                                José Abraham S&aacute;nchez
                              </label>
                            </div>
                            <div class="radio">
                              <label>
                                <input type="radio" name="optionsRadios" id="optionsRadios3" value="3">
                                Sergio Sisneros
                              </label>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label>Observaciones:</label>
                                <textarea class="form-control" name="obsCort" id="obsCort" onpaste="return false" style="resize:none;" required=""  ></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">                                
                                <input type="submit" id="btnenvioCor" class="btn btn-primary"  value="Registrar Cortesía">
                            </div>
                        </div>
                    </div> 
                    <div class="row">
                        <div class="col-md-12">
                            <div id="validacionCort">                                
                                
                            </div>
                        </div>
                    </div> 
                </form>               
            </div>
            <div id="validacionPaseMedico" ng-show="validaPase" class="mianimacion" style="width:100%">             
	            <div class="row">
	                <div class="col-md-12">
	                    <div class="checkbox">
	                      <label>
	                        <input id="check1" ng-model="check1" type="checkbox">
	                        El pase médico no presenta tachaduras ni enmendaduras  
                            <button style="background:transparent; border:0px" tooltip-placement="right" tooltip="Debe comunicarse al 01-800-9991-222"><img src="imgs/signo.jpg" width="25" height="25" class="img-circle" /></button>
	                      </label>
	                    </div>
	               	
	                    <div class="checkbox">
	                      <label>
	                        <input id="check2" ng-model="check2" type="checkbox">
	                        El pase médico se encuentra vigente  
                            <button style="background:transparent; border:0px" tooltip-placement="right" tooltip="Debe comunicarse al 01-800-9991-222"><img src="imgs/signo.jpg" width="25" height="25" class="img-circle" /></button>
                            </label>
	                    </div>
	               		
	                    <div class="checkbox">
	                      <label>
	                        <input id="check3" ng-model="check3" type="checkbox">
	                       Se corroboró la identidad del lesionado
                           <button style="background:transparent; border:0px" tooltip-placement="right" tooltip="Debe comunicarse al 01-800-9991-222"><img src="imgs/signo.jpg" width="25" height="25" class="img-circle" /></button>
                           </label>
	                    </div>
	                </div>
	            </div>               
	            <div class="row">
	            	<div class="col-md-12" ng-hide="check1 && check2 && check3" class="mianimacion">	
                        <div id="noAutorizacion" ng-show="validaInputAut" class="mianimacion">                   
    						<label>
    							<input ng-model="autorizacion" type="text" value="">
    							     No. de Autorización <br>
                                <small>*comunicarse a <b>ubicacion</b> al número <b>telefono</b> </small>
                                                     
    						</label>
                        </div>	        
                        <div ng-show="errorAut">
                            <label>No existe el numero de autorización</label>
                        </div>                                     
						<input type="button" ng-hide="check1 && check2 && check3" id="activaForm" class="btn btn-info"  ng-click="validaAutorizacion()" value="Siguiente">	                       	                     	                    
						<div id="msjAuth">{{respuesta}}</div>
	                </div>
	            </div>                
            </div> 
                     
            <div id="datosSiniestro" name="datosSiniestro" ng-show="(check1 && check2 && check3)|| segundaEtapa" class="mianimacion" style="width:100%">
             <form ng-submit="guardaEtapa2()" name="etapa2" novalidate>  
            <div class="row">
                <div class="form-group">

                    <div class="col-md-12">
                        <h3><label>Datos del Siniestro</label></h3>
                    </div>
                </div>
            </div>
            
                <div class="row">
                     
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Cobertura Afectada: </label>
                        <select name="cobAfec" id="rie"  ng-model="datosSin.cobAfec" class= "form-control" required >
                            <option value=""> * Seleccione </option>
                            <option ng-repeat="cobertura in list" value="{{cobertura.RIE_clave}}">
                                {{cobertura.RIE_nombre}}
                            </option>                            
                        </select>
                        <div class="alert alert-danger" role="alert" ng-if="interacted1(etapa2.cobAfec)" ng-messages="etapa2.cobAfec.$error">
                          <div ng-message="required">Se requiere el valor de la cobertura afectada</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">                    
                     <div class="form-group">
                        <label>Poliza:</label>
                        <input type="text" class="form-control" id="pol" name="poliza" ng-model="datosSin.poliza" required  mayusculas>
                        <div class="alert alert-danger" role="alert" ng-if="interacted1(etapa2.poliza)" ng-messages="etapa2.poliza.$error">
                          <div ng-message="required">Se requiere el valor de la póliza</div>
                        </div>
                    </div>
                 </div>
                 
                <div class="col-md-4">
                    <div class="form-group">
                        <label>{{noCompania}}</label>
                         <input id="noCia" name="noCia" type="text" ng-model="datosSin.noCia" class="form-control" mayusculas  />
                     </div>
                 </div>
                </div>
            <br>
             <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Inciso  </label>
                         <input id="inciso" name="inciso" ng-model="datosSin.inciso" type="text" class="form-control"  mayusculas/>
                     </div>
                </div>
                 <div class="col-md-4" >
                    <div class="form-group">
                        <label>Siniestro:</label>
                        <input type="text" class="form-control" name="siniestro" ng-model="datosSin.siniestro" ng-required="!valida" mayusculas>
                        <div class="alert alert-danger" role="alert" ng-if="interacted1(etapa2.siniestro)" ng-messages="etapa2.siniestro.$error">
                          <div ng-message="required">Se requiere el valor del siniestro</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Reporte:</label>
                        <input type="text" class="form-control" name="reporte"  ng-model="datosSin.reporte" ng-required="!valida" mayusculas>
                         <div class="alert alert-danger" role="alert" ng-if="interacted1(etapa2.reporte)" ng-messages="etapa2.reporte.$error">
                          <div ng-message="required">Se requiere el valor del reporte</div>
                        </div>
                    </div>
                </div>                
            </div>
            <div class="row mianimacion" ng-show="mensajeError">
                <div class="col-md-8 col-md-offset-4">
                    <div class="alert alert-warning">Debe ingresar siniestro o reporte</div>    
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Folio de Pase:</label>
                        <input type="text" class="form-control" id="folPase" name="folPase" ng-model="datosSin.folPase" required mayusculas>
                        <div class="alert alert-danger" role="alert" ng-if="interacted1(etapa2.folPase)" ng-messages="etapa2.folPase.$error">
                          <div ng-message="required">Se requiere el valor de la póliza</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="form-group">
                        <label>Observaciones:</label>
                        <textarea class="form-control" name="obsexp" id="obsexp" ng-model="datosSin.obs" onpaste="return false" style="resize:none;" mayusculas ></textarea>
                    </div>
                </div>
            </div>  
            <div class="row">
                <div class="col-md-2">
                     <input type="submit" id="btnenvio" class="btn btn-primary"  value="Registrar">
                </div>
                <div class="col-md-2">
                     <input type="reset" class="btn btn-danger"  value="Limpiar">
                </div> 
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div ng-show="cargador1" align="center">
                            <img ng-src="imgs/cargador.gif">
                    </div>
                </div>
            </div>
            </form> 

 </div>            

        </div>
    </div>
</div>
<script type="text/javascript">
       $('#fecnac').datetimepicker({

        pickDate: true,                 //en/disables the date picker
        pickTime: false,                 //en/disables the time picker     
        showToday: true,                 //shows the today indicator
        language:'es'                  //sets language locale        
    });
    $(function () {    
    $('#checkSinCorreo').confirmation({
        onConfirm: function() { $("#checkSinCorreo").prop("checked");
                                $('#checkSinCorreo').confirmation('destroy');
                                return false;},
        onCancel: function() { }
    });
});
</script>
